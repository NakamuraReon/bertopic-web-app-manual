# BERTopic Webアプリ操作マニュアル
<div id="top"></div>

## 説明
本ドキュメントは、BERTopic Webアプリの操作マニュアルを説明しております．  
BERTopic Webのアクセスリンクは[こちら](https://6d1c-130-158-170-71.ngrok-free.app/)です。  
BERTopic Webアプリは以下の８つのウィンドウで構成されております。  

#### BERTopic Webアプリのウィンドウ一覧
---
1. [トピック一覧](#1．トピック一覧)
2. [個別トピック情報](#2．個別トピック情報)
3. [トピック比較](#3．トピック比較)
4. [個別企業情報](#4．個別企業情報)
5. [トピック検索](#5．トピック検索)
6. [トピックの時系列クラスタリング](#6．トピックの時系列クラスタリング)
7. [トピックの変動率](#7．トピックの変動率)
8. [トピックのトレンド分類](#8．トピックのトレンド分類)
---

<br>

## 1．トピック一覧
### 1-1．トピック一覧
特許文書に[Supervised Topic Modeling](https://maartengr.github.io/BERTopic/getting_started/supervised/supervised.html)を実行した結果を出力しております。  
なお、教師ラベルとしてIPCの上位２ペアを使用しています。  
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
```

### 1-2. トピックの階層クラスタリング
トピック同士の階層構造を表示します。

<br>



## 2．個別トピック情報
本ウィンドウでは、個別トピック情報の結果を表示します。  
はじめに、サイドウィンドウより情報を取得したいトピックのトピック番号を選択してください。
### 2-1．トピック情報
選択したトピックの情報が表示されます。
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
```


### 2-2．トピックの時系列情報
[Dynamic Topic Modeling](https://maartengr.github.io/BERTopic/getting_started/topicsovertime/topicsovertime.html)を実行して得たトピックの時系列情報と、将来のトピックの出現頻度の予測結果を表示しています。  


### 2-3．トピックの該当企業
選択したトピックに該当する特許文書を発行した企業・機関が棒グラフで出力しています。  
ここではモデルの学習の都合上、１つの特許文書に複数企業で発行した場合でも第一著者のみを扱っております。


### 2-4．トピックの該当文書
選択したトピックに該当する特許文書の情報を表示しております。
表のカラムの説明は以下の通りです。

```
公開・公表番号
発明の名称
Timestamps     ：トピックの発行年月日
Labels         ：トピックの第一著者
Document       :特許文書から抽出したキーワード
IPC            :IPCの上位２ペア
```

<br>


## 3．トピック比較
本ウィンドウでは、選択したトピックの時系列情報の比較が可能です。

### 3-1．上位のトピックの時系列
トピックの表示件数を選択して、選択した表示件数のトピックの時系列情報の比較が可能です。


### 3-2．指定のトピックの時系列
トピック番号を選択して、選択したトピックの時系列情報の比較が可能です。

<br>

## 4．個別企業情報
本ウィンドウでは、個別企業情報の結果を表示します。  
はじめに、サイドウィンドウより情報を取得したい企業を選択してください。

### 4-1．トピック一覧
選択した企業が発行した特許文書のみで[Supervised Topic Modeling](https://maartengr.github.io/BERTopic/getting_started/supervised/supervised.html)を実行した結果を出力しております。  
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
```

### 4-2．トピックの該当文書
選択したトピックに該当する特許文書の情報を表示しております。
表のカラムの説明は以下の通りです。

```
公開・公表番号
発明の名称
Timestamps     ：トピックの発行年月日
Labels         ：トピックの第一著者
Document       :特許文書から抽出したキーワード
IPC            :IPCの上位２ペア
```


### 4-3．トピックの時系列比較
[Dynamic Topic Modeling](https://maartengr.github.io/BERTopic/getting_started/topicsovertime/topicsovertime.html)を実行して得たトピックの時系列情報と、将来のトピックの出現頻度の予測結果を表示しています。  

<br>

## 5．トピック検索
### 5-1．検索方法１：キーワードから類似するトピックを検索
キーワードを入力し、キーワードのエンベーディングと文書のエンベーディングの類似度が高い上位５件を表示しています。
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
Similarity      ：キーワードとの類似度
```

### 5-2．検索方法２：キーワードを含むトピックを検索
#### 5-2-1．Representaionにキーワードを含むトピックを検索
キーワードを入力し、`Representation`にキーワードを含むトピックを表示しています。
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
Keyword_Count   ：Representationに含まれるキーワードの個数
```

#### 5-2-2．Topicにキーワードを含むトピックを検索
キーワードを入力し、`Topic`にキーワードを含むトピックを表示しています。
表のカラムの説明は以下の通りです。

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
```

### 5-3．検索方法３：検索方法１と検索方法２のハイブリッド

<br>

## 6．トピックの時系列クラスタリング
本ウィンドウでは、トピックの時系列クラスタリングの結果を表示しています。  
はじめに、サイドウィンドウから時系列データの前処理を行ってください。  
各時系列データの前処理の説明は以下の通りです。

```
移動平均ウィンドウ（年）：
    ｎ年前との平均で計算。
    高いほど外れ値の影響が緩和される。

直近期間で絞込み （年）：
    １０年の場合、現在から１０年前までの時系列情報で実行。

上位トピック数で絞込み（個）：
    出現頻度が極端に低いトピックも含まれるため、
    上位５０件程度で絞込みを実行することがおすすめ。
```

### 6-1．クラスタリングの結果
クラスタ数を選択することで、トピックの時系列クラスタリングが実行されます。  
クラスタ数５が選択された場合、トピックの時系列情報が５つのクラスタに分けられます。


### 6-2．各クラスタに属するトピック情報を表示
選択したクラスタに属するトピック情報を表示

```
TopicId         ：トピックのID
Topic           ：トピックが該当するIPCの上位２ペア
Representation  ：トピックを構成する上位１０単語
Count           ：トピックの出現頻度
```

<br>

## 7．トピックの変動率
本ウィンドウでは、トピック出現頻度の変動率が表示しています。
はじめに、サイドウィンドウから時系列データの前処理を行ってください。  
各時系列データの前処理の説明は以下の通りです。

```
移動平均ウィンドウ（年）：
    ｎ年前との平均で計算。
    高いほど外れ値の影響が緩和される。

直近期間で絞込み （年）：
    １０年の場合、現在から１０年前までの時系列情報で実行。

上位トピック数で絞込み（個）：
    出現頻度が極端に低いトピックも含まれるため、
    上位５０件程度で絞込みを実行することがおすすめ。
```

トピック出現頻度の変動率が表示されます。

<br>


## 8．トピックのトレンド分類
本ウィンドウでは、トピックのトレンド分類の結果を表示しています。
はじめに、サイドウィンドウから時系列データの前処理を行ってください。  
各時系列データの前処理の説明は以下の通りです。

```
移動平均ウィンドウ（年）：
    ｎ年前との平均で計算。
    高いほど外れ値の影響が緩和される。

直近期間で絞込み （年）：
    １０年の場合、現在から１０年前までの時系列情報で実行。

上位トピック数で絞込み（個）：
    出現頻度が極端に低いトピックも含まれるため、
    上位５０件程度で絞込みを実行することがおすすめ。
```

次にトレンドを選択することで、選択したトレンドに該当するトピックのトレンドが出力されます。

